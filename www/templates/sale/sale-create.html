<ion-view view-title="Sale Create">
  <ion-nav-buttons side="right">
    <button class="button icon ion-person-add" ng-click="customerOpenModal(false)"></button>
  </ion-nav-buttons>
  <ion-content padding="true">
		<form name="formCreateSale" ng-submit="create(cart)" class="list">

      <!-- SELECT CUSTOMER -->
      <div class="item item-input item-select" ng-click="customerOpenModal(true)">
        <span class="input-label">Customer</span>
        <p>{{sale.customerName}}</p>
      </div>

      <!-- PRODUCTS -->
      <label class="item item-input item-select item-divider" ng-click="productOpenModal()">
        <span class="input-label">Products</span>
      </label>
      <div class="item row" ng-repeat="item in cart.products">
        <div class="col col-40">
          <div>
            {{item.item.extra.product_type_name}}
            {{item.item.name}}
          </div>
          <div>
            {{item.item.extra.brand_name}}
          </div>
        </div>
        <div class="col col-15 center" ng-if="item.item.quantity > 0 && item.item.qtySelected < item.item.quantity">
          <button type="button" class="button icon ion-plus-circled button-light" ng-click="addItem(item.item,null)"></button>
        </div>
        <div class="col col-15 center" ng-if="item.item.qtySelected > 0">
          <button type="button" class="button icon ion-minus-circled button-light" ng-click="removeItem(item.item,null)"></button>
        </div>
        <div class="col">
          <span class="badge badge-positive">{{item.qty}}</span>
        </div>
      </div>

      <!-- SERVICES -->
      <label class="item item-input item-select item-divider" ng-click="serviceOpenModal()">
        <span class="input-label">Services</span>
      </label>
      <div class=" item row" ng-repeat="item in cart.services">
        <div class="col col-40">
          {{item.item.name}}
        </div>
        <div class="col col-15 center">
          <button type="button" class="button icon ion-plus-circled button-light" ng-click="addItem(null,item.item)"></button>
        </div>
        <div class="col col-15 center" ng-if="item.item.qtySelected > 0">
          <button type="button" class="button icon ion-minus-circled button-light" ng-click="removeItem(null,item.item)"></button>
        </div>
        <div class="col">
          <span class="badge badge-positive">{{item.item.qtySelected}}</span>
        </div>
      </div>

      <div class="spacer" style="height:20px;"></div>

      <!-- SUBTOTAL -->
      <div class="row item item-positive">
        <div class="col col-75">
          SubTotal
        </div>
        <div class="col col-25">
          {{ cart.totalCart - (cart.totalCart * cart.discount) / 100 | currency : $ : 0 }}
        </div>
      </div>

      <!-- DISCOUNT -->
      <div class="row item item-light">
        <div class="col col-50">
          Discount
        </div>
        <div class="col col-25">
          {{cart.discount}} %
        </div>
        <div class="col col-25">
          {{ (cart.totalCart * cart.discount) / 100 | currency : $ : 0 }}
        </div>
      </div>

      <!-- RANGE DISCOUNT -->
      <div class="item range range-positive">
        <i>0</i>
        <input type="range" name="discount" min="0" max="100" value="0" ng-model="cart.discount">
        <i>100</i>
      </div>

      <div class="spacer" style="height:20px;"></div>

      <div ng-if="showRangePoints">
        <!-- POINTS -->
        <div class="row item item-light">
          <div class="col col-50">
            Points
          </div>
          <div class="col col-25">
            <!-- {{cart.points}} -->
          </div>
          <div class="col col-25">
            {{ cart.points | currency : $ : 0 }}
          </div>
        </div>

        <!-- RANGE POINT CRM -->
        <div class="item range range-balanced">
          <i>0</i>
          <input type="range" name="points" min="0.00" max="{{maxRangePoints}}" value="0" ng-model="cart.points">
          <i>{{points}}</i>
        </div>
      </div>

      <div class="spacer" style="height:20px;"></div>

      <!-- TAX -->
      <div class="row item item-light">
        <div class="col col-75">
          Tax
        </div>
        <div class="col col-25">
          {{ cart.tax | currency : $ : 0 }}
        </div>
      </div>

      <!-- TOTAL -->
      <div class="row item item-positive">
        <div class="col col-75">
          Total
        </div>
        <div class="col col-25">
          {{ cart.totalCart - (cart.totalCart * cart.discount) / 100 + cart.tax - cart.points | currency : $ : 0 }}
        </div>
      </div>

      <!-- SUBMIT FORM -->
      <button type="submit" class="button button-balanced button-block button-outline icon-left ion-android-add">Create</button>
      <button type="button" ng-click="cancel()" class="button button-positive button-block button-outline icon-left ion-android-arrow-back">Cancel</button>
    </form>
    <!-- <created-account-crm></created-account-crm> -->
	</ion-content>
</ion-view>